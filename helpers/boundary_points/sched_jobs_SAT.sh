#!/usr/bin/env bash
set -euo pipefail

# Solving SAT jobs: KNF, only need 4GB RAM
# List of jobs: each line is k n x y s c v a l b f
# Hard points past 180, SAT:KNF, UNSAT:CNF, using "UB"; line-filter heuristic (k+10) also set

jobs=(
"7 235 78 156 1 0 1 0 0 2 1"
"7 238 80 157 1 0 1 0 0 2 1"
"7 241 82 158 1 0 1 0 0 2 1"
"7 242 82 159 1 0 1 0 0 2 1"
"7 243 82 160 1 0 1 0 0 2 1"
"7 244 82 161 1 0 1 0 0 2 1"
"7 245 83 161 1 0 1 0 0 2 1"
"7 246 83 162 1 0 1 0 0 2 1"
"7 248 84 163 1 0 1 0 0 2 1"
"7 250 85 164 1 0 1 0 0 2 1"
"7 251 85 165 1 0 1 0 0 2 1"
"7 252 86 165 1 0 1 0 0 2 1"
"7 253 86 166 1 0 1 0 0 2 1"
"7 254 87 166 1 0 1 0 0 2 1"
"7 255 87 167 1 0 1 0 0 2 1"
"7 256 88 167 1 0 1 0 0 2 1"
"7 257 88 168 1 0 1 0 0 2 1"
"7 258 88 169 1 0 1 0 0 2 1"
"7 259 89 169 1 0 1 0 0 2 1"
"7 260 89 170 1 0 1 0 0 2 1"
"7 261 90 170 1 0 1 0 0 2 1"
"7 262 90 171 1 0 1 0 0 2 1"
"7 232 153 78 1 0 1 0 0 2 1"
"7 235 155 79 1 0 1 0 0 2 1"
"7 236 155 80 1 0 1 0 0 2 1"
"7 237 155 81 1 0 1 0 0 2 1"
"7 238 156 81 1 0 1 0 0 2 1"
"7 239 157 81 1 0 1 0 0 2 1"
"7 241 158 82 1 0 1 0 0 2 1"
"7 242 158 83 1 0 1 0 0 2 1"
"7 243 159 83 1 0 1 0 0 2 1"
"7 245 160 84 1 0 1 0 0 2 1"
"7 246 161 84 1 0 1 0 0 2 1"
"7 247 161 85 1 0 1 0 0 2 1"
"7 249 163 85 1 0 1 0 0 2 1"
"7 251 164 86 1 0 1 0 0 2 1"
"7 252 164 87 1 0 1 0 0 2 1"
"7 254 165 88 1 0 1 0 0 2 1"
"7 255 166 88 1 0 1 0 0 2 1"
"7 256 167 88 1 0 1 0 0 2 1"
"7 257 167 89 1 0 1 0 0 2 1"
"7 258 168 89 1 0 1 0 0 2 1"
"7 259 168 90 1 0 1 0 0 2 1"
"7 260 169 90 1 0 1 0 0 2 1"
"7 261 170 90 1 0 1 0 0 2 1"
"7 262 170 91 1 0 1 0 0 2 1"
"7 263 171 91 1 0 1 0 0 2 1"
"7 264 171 92 1 0 1 0 0 2 1"
"7 265 172 92 1 0 1 0 0 2 1"
"7 266 173 92 1 0 1 0 0 2 1"
"7 267 173 93 1 0 1 0 0 2 1"
"7 268 174 93 1 0 1 0 0 2 1"
)

for line in "${jobs[@]}"; do
  read -r k n x y s c v a l b f <<< "$line"
  for r in $(seq 1 1); do
    jobname="k${k}_n${n}_x${x}_y${y}_f${f}_b${b}_r${r}"
    echo "Submitting job $jobname"
    sbatch --job-name="$jobname" --mem-per-cpu=4GB --time=72:00:00 run_jobs.sh \
      -k "$k" -n "$n" -x "$x" -y "$y" \
      -s "$s" -c "$c" -v "$v" -a "$a" -l "$l" -b "$b" -f "$f" \
      -t 0 -r "$r" -j "10" #using line filter heuristic
    sleep 1
  done
done
